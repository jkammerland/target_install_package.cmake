#!/bin/bash
# Arch Linux package build helper script
# Generated by CMake target_configure_universal_packaging

set -e

echo "Building Arch Linux package..."

# Validate PKGBUILD
if [[ ! -f PKGBUILD ]]; then
    echo "Error: PKGBUILD not found"
    exit 1
fi

# Check dependencies
echo "Checking build dependencies..."
if ! pacman -T $(source PKGBUILD; printf '%s\n' "${makedepends[@]}") > /dev/null 2>&1; then
    echo "Installing missing build dependencies..."
    sudo pacman -S --needed $(source PKGBUILD; printf '%s\n' "${makedepends[@]}")
fi

# Build package
echo "Building package..."
makepkg -sf

echo "Package built successfully!"
echo "Install with: sudo pacman -U *.pkg.tar.xz"